square: false
type: grid
cards:
  - type: custom:swipe-card
    card_width: 200px
    start_card: 2
    parameters:
      effect: coverflow
      grabCursor: true
      centeredSlides: true
      slidesPerView: auto
      coverflowEffect:
        rotate: 50
        stretch: 0
        depth: 100
        modifier: 1
        slideShadows: true
      pagination:
        type: bullets
    cards:
      - type: custom:mushroom-template-card
        primary: '{{ states.sensor.ultimo_orario_parcheggio.state }}'
        secondary: Ultima Sosta
        icon: mdi:timer-pause
        entity: sensor.t_crock_parking_time
        layout: vertical
        icon_color: |-
          {% if is_state('binary_sensor.t_crock_vehicle_moving', 'off') %}
                            red
                          {% else %}
                            green
                          {% endif %}
        line_width: 16
        line_color: '#FF6384'
      - type: custom:mushroom-template-card
        icon: mdi:car-hatchback
        entity: binary_sensor.t_crock_vehicle_moving
        icon_color: blue
        primary: >-
          {{ states.sensor.t_crock_last_trip_average_fuel_consumption.state }} 
          litri/100 km
        secondary: Consumo medio
        layout: vertical
        fill_container: true
        card_mod:
          style:
            mushroom-shape-icon$: |
              .shape {
                clip-path: inset(0 0 0 0);
              }
            .: |
              ha-state-icon {
                animation: vroom 2s ease-in-out infinite;
              }
              @keyframes vroom {
                49% { opacity: 1;}
                50% { transform: translate(32px); opacity: 0; }
                51% { transform: translate(-32px); opacity: 0; }
                52% { opacity: 1; }
              }
        line_color: '#36A2EB'
        line_width: 8
      - type: custom:mushroom-template-card
        primary: |

          {{ states.sensor.ultimo_aggiornamento_dati_macchina.state }} 
        secondary: Ultimo Aggiornamento
        icon: mdi:cloud-upload
        entity: sensor.t_crock_last_connected
        layout: vertical
        icon_color: orange
        fill_container: true
        line_color: '#ffce57'
        line_width: 8
  - type: custom:swipe-card
    cards:
      - square: false
        type: grid
        cards:
          - type: picture-elements
            image: /local/mappacasa/t_roc.png
            title: T CROCK
            elements:
              - type: image
                image: /local/mappacasa/forza.png
                style:
                  '--mdc-icon-size': 30px
                  top: 0%
                  left: 94%
                  width: 14%
              - type: custom:stack-in-card
                mode: vertical
                cards:
                  - type: custom:mushroom-person-card
                    entity: person.t_crock
                    use_entity_picture: true
                    hide_name: true
                    hide_state: true
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: Federico
                          content:
                            type: vertical-stack
                            cards:
                              - type: custom:mushroom-entity-card
                                entity: person.t_crock
                                layout: horizontal
                                icon_type: entity-picture
                                primary_info: state
                                secondary_info: last-changed
                                tap_action:
                                  action: none
                                hold_action:
                                  action: none
                                card_mod:
                                  style:
                                    mushroom-shape-avatar$: |
                                      .picture {

                                        /* Style shadow ring around person avatar */                              
                                        box-shadow: 0px 0px 8px 4px var(--state-person);
                                        margin-right: var(--mush-title-spacing, 12px);
                                      }
                                    .: |
                                      ha-card {

                                        /* Remove default card styling */
                                        --ha-card-background: rgba(var(--rgb-card-background-color), 0.);;
                                        box-shadow: none;
                                        --ha-card-border-width: 0;

                                        /* Increase icon size */
                                        --icon-size: 80px;

                                        /* Center card */
                                        margin: auto;
                                        width: fit-content;

                                        /* Add padding to bottom of card */
                                        padding: 0px 0px var(--mush-title-spacing, 12px) 0px !important;
                                        
                                        /* Make card non-responsive to select and pointer */
                                        user-select: none;
                                        pointer-events: none;
                                        
                                        transition: all 0s;
                                      }
                                      :host {

                                        /* Define Person State colors. Can be added to theme */
                                        --state-person-home: var(--green-color);
                                        --state-person-not-home: var(--red-color);
                                        --state-person-zone: var(--blue-color);
                                        --state-person-unknown: var(--grey-color);

                                        /* Set Person State color */
                                        --state-person:
                                        {% if is_state(config.entity, ['home', 'not_home', 'unknown']) %}
                                          var(--state-person-{{ states(config.entity) | replace('_', '-') }})
                                        {% else %}
                                          var(--state-person-zone)
                                        {% endif %};

                                        /* Match styling to Mushroom Title */
                                        --mush-card-primary-font-size: var(--mush-title-font-size, 24px);
                                        --mush-card-primary-font-weight: var(--mush-title-font-weight, normal);
                                        --mush-card-primary-line-height: var(--ush-title-line-height, 1.2);
                                        --mush-card-secondary-font-size: var(--mush-title-font-size, 16px);
                                        --mush-card-secondary-font-weight: var(--mush-title-font-weight, normal);
                                        --mush-card-secondary-line-height: var(--ush-title-line-height, 1.2);
                                      }
                              - type: history-graph
                                entities:
                                  - entity: person.t_crock
                                    name: ' '
                                hours_to_show: 24
                                title: Timeline
                                card_mod:
                                  style:
                                    $: |
                                      .card-header {

                                        /* Style timeline title */
                                        padding: 0px 24px !important;
                                        font-size: var(--mush-card-primary-font-size, 14px) !important;
                                        font-weight: var(--mush-card-primary-font-weight, bold) !important;
                                        line-height: var(--mush-card-primary-line-height, 1.5) !important;
                                        color: var(--primary-text-color) !important;
                                      }
                                    .: |
                                      ha-card {

                                        /* Remove default card styling */
                                        --ha-card-box-shadow: none;
                                        --ha-card-background: none;
                                        --ha-card-border-width: 0;
                                        user-select: none;
                                      }
                                      .content {

                                        /* Add padding on right */
                                        padding: 0px 24px !important;
                                      }
                              - type: horizontal-stack
                                cards:
                                  - type: conditional
                                    conditions:
                                      - entity: device_tracker.t_crock_position
                                        state_not: not home
                                    card:
                                      type: custom:mushroom-template-card
                                      primary: '{{ states(entity) }} '
                                      secondary: >-
                                        {{ state_attr(entity, 'distance') |
                                        round(1) }} km
                                      icon: mdi:map-marker-path
                                      entity: device_tracker.t_crock_position
                                      layout: vertical
                                      icon_color: purple
                                      tap_action:
                                        action: none
                                      hold_action:
                                        action: none
                                      double_tap_action:
                                        action: none
                                      card_mod:
                                        style:
                                          mushroom-state-info$: |
                                            .primary:after {

                                              /* Add destination details */
                                              content: "\A Casa";
                                              white-space: pre;
                                              text-overflow: ellipsis;
                                            }
                                          .: |
                                            ha-card {

                                              /* Remove default card styling */
                                              --ha-card-background: none;
                                              --ha-card-box-shadow: none;
                                              --ha-card-border-width: 0;

                                              /* Center card on row */
                                              width: fit-content;
                                              margin: auto;

                                              /* Make card non-responsive to select and pointer */
                                              user-select: none;
                                              pointer-events: none;
                                            }
                              - type: horizontal-stack
                                cards:
                                  - type: conditional
                                    conditions:
                                      - entity: device_tracker.t_crock_position
                                        state_not: home
                                    card:
                                      type: custom:mushroom-template-card
                                      primary: >-
                                        {{ states(entity) }} {{
                                        state_attr(entity,
                                        'unit_of_measurement') }}
                                      secondary: >-
                                        {{ state_attr(entity, 'distance') |
                                        round(1) }} km
                                      icon: mdi:map-marker-path
                                      entity: device_tracker.t_crock_position
                                      layout: vertical
                                      icon_color: purple
                                      tap_action:
                                        action: none
                                      hold_action:
                                        action: none
                                      double_tap_action:
                                        action: none
                                      card_mod:
                                        style:
                                          mushroom-state-info$: |
                                            .primary:after {

                                              /* Add destination details */
                                              content: "\A Lavoro";
                                              white-space: pre;
                                              text-overflow: ellipsis;
                                            }
                                          .: |
                                            ha-card {

                                              /* Remove default card styling */
                                              --ha-card-background: none;
                                              --ha-card-box-shadow: none;
                                              --ha-card-border-width: 0;

                                              /* Center card on row */
                                              width: fit-content;
                                              margin: auto;

                                              /* Make card non-responsive to select and pointer */
                                              user-select: none;
                                              pointer-events: none;
                                            }
                              - type: map
                                entities:
                                  - entity: person.t_crock
                                dark_mode: false
                                hours_to_show: 24
                                aspect_ratio: '4:3'
                                card_mod:
                                  style:
                                    ha-map $ ha-entity-marker $: |
                                      .marker {

                                        /* Style person marker & adjust position to avoid blocking waypoints */
                                        border: 3px solid var(--state-person) !important;
                                        border-radius: 50% 50% 50% 0px !important;
                                        transform: rotate(-45deg) translate(50%, -50%);
                                        overflow: visible !important;
                                        background: var(--state-person) !important;
                                      }
                                      .entity-picture {

                                        /* Correct orientation of person avatar */
                                        transform: rotate(45deg);
                                        border-radius: 50%;
                                      }
                                    ha-map $: |
                                      path:first-child { 

                                        /* Style accuracy radius */
                                        stroke: var(--state-person);
                                        fill: color-mix(in srgb, var(--state-person) 50%, transparent);
                                        stroke-width: 0px;
                                      }
                                      path:nth-child(even) {

                                        /* Styling for waypoints */
                                        stroke: var(--purple-color);
                                        stroke-width: 4px;
                                      }
                                      path:nth-child(odd):not(:first-child) { 

                                        /* Styling for lines */
                                        stroke: var(--purple-color);
                                        stroke-width: 4px;
                                      }

                                      .leaflet-control-attribution {

                                        /* Style attribution text */
                                        background: rgba(var(--rgb-card-background-color), 0.4) !important;
                                        font-size: 10px;
                                      }
                                      .leaflet-container a {

                                        /* Set color of zoom icons & attribution text */
                                        color: var(--secondary-text-color);
                                      }

                                      .leaflet-control-zoom-in,
                                      .leaflet-control-zoom-out {

                                        /* Style zoom buttons like Chips */
                                        border-radius: var(--mush-chip-border-radius, 19px) !important;
                                        padding: 3px;
                                        background: rgb(var(--rgb-secondary-text-color), 0.2) !important;
                                        margin: 8px 12px 0px;
                                        border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                                      } 
                                      .leaflet-top {

                                        /* Move zoom buttons to bottom of map */
                                        bottom: 0px !important;
                                      }
                                      .leaflet-control-zoom {

                                        /* Allow buttons to be moved */
                                        position: absolute !important;

                                        /* Adjust spacing for border */
                                        bottom: calc(2 * var(--ha-card-border-width, 1px) + 56px);
                                        
                                        /* Remove extra margin */
                                        margin: 0px !important;

                                        /* Remove zoom control border */
                                        border: none !important;
                                      }
                                      .leaflet-container:after {

                                        /* Fade out map at top */
                                        content: "";
                                        position: absolute;
                                        height: 100%;
                                        width: 100%;
                                        background: linear-gradient(to top, transparent 65%, var(--card-background-color));
                                      }
                                    ha-icon-button $ mwc-icon-button $: |
                                      button {

                                        /* Size center button to match Chip */
                                        height: var(--mush-chip-height, 36px) !important;
                                        width: var(--mush-chip-height, 36px) !important;
                                        --mdc-icon-size: 22px;
                                      }
                                    .: |
                                      ha-card {

                                        /* Remove default card styling without affecting child elements */
                                        box-shadow: none;
                                        border-width: 0;
                                        border-radius: 0px 0px var(--ha-card-border-radius, 12px) var(--ha-card-border-radius, 12px);
                                        
                                        transition: all 0s;
                                      }
                                      :host {

                                        /* Define Person State colors. Can be added to theme */
                                        --state-person-home: var(--green-color);
                                        --state-person-not-home: var(--red-color);
                                        --state-person-zone: var(--blue-color);
                                        --state-person-unknown: var(--grey-color);

                                        /* Set person state color */
                                        --state-person:
                                        {% if is_state(config.entities[0].entity, ['home', 'not_home', 'unknown']) %}
                                          var(--state-person-{{ states(config.entities[0].entity) | replace('_', '-') }})
                                        {% else %}
                                          var(--state-person-zone)
                                        {% endif %};
                                      }
                                      ha-icon-button {

                                        /* Position center button */
                                        bottom: 12px;
                                        left: 12px !important;
                                        top: auto !important;

                                        /* Style center button to match Chip */
                                        color: var(--deep-orange-color) !important;
                                        background: color-mix(in srgb, var(--deep-orange-color) 20%, transparent);
                                        border-radius: var(--mush-chip-border-radius, 19px);
                                        border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                                      }
                          card_mod:
                            style: |
                              :host {

                                /* Remove border from poup */
                                --popup-padding-x: 0px;
                                --popup-padding-y: 0px;
                                --popup-min-width: 450px;
                              }
                              .content {

                                /* Remove extra bottom border */
                                margin: -18px -24px -24px !important;
                              }
                    alignment: center
                card_mod:
                  style: |
                    ha-card {
                    background: rgba(var(--rgb-card-background-color), 0.);
                style:
                  top: 2%
                  left: 9%
              - type: state-label
                entity: sensor.t_crock_last_trip_length
                title: Ultimo Viaggio
                tap_action:
                  action: none
                style:
                  top: 92%
                  left: 15%
                  font-size: 1em
                  font-weight: 600
              - type: state-icon
                entity: sensor.t_crock_last_trip_length
                title: Ultimo Viaggio
                icon: mdi:map-marker-distance
                icon_color: blue
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Dati Ultimo Viaggio
                      content:
                        type: custom:stack-in-card
                        cards:
                          - type: custom:layout-card
                            layout_type: masonry
                            layout: {}
                            cards:
                              - type: custom:mushroom-entity-card
                                entity: >-
                                  sensor.t_crock_last_trip_average_fuel_consumption
                                tap_action:
                                  action: more-info
                                name: Consumo
                                icon: mdi:fuel
                                icon_color: orange
                              - type: custom:mushroom-entity-card
                                entity: sensor.t_crock_last_trip_average_speed
                                name: Velocità Media
                                tap_action:
                                  action: more-info
                                icon: mdi:speedometer-slow
                                icon_color: green
                              - type: custom:mushroom-entity-card
                                entity: sensor.t_crock_last_trip_duration
                                tap_action:
                                  action: more-info
                                name: Durata Ultimo Viaggio
                                icon: mdi:clock-end
                                icon_color: green
                style:
                  top: 91%
                  left: 5%
                  '--paper-item-icon-color': orange
              - type: state-icon
                entity: sensor.bagagliaio_troc
                icon: mdi:car-key
                tap_action:
                  action: call-service
                  service: honeycomb
                  service_data:
                    size: 200
                    spacing: 10
                    buttons:
                      - icon: mdi:car-door-lock
                        color_type: icon
                        color: orange
                        styles:
                          icon:
                            - width: 200%
                        tap_action:
                          action: more-info
                          entity: binary_sensor.t_crock_doors_locked
                      - icon: mdi:window-closed
                        color_type: icon
                        color: orange
                        styles:
                          icon:
                            - width: 200%
                        tap_action:
                          action: more-info
                          entity: binary_sensor.t_crock_windows_closed
                      - icon: mdi:car-key
                        color_type: icon
                        color: orange
                        styles:
                          icon:
                            - width: 200%
                        tap_action:
                          action: more-info
                          entity: binary_sensor.t_crock_hood_closed
                style:
                  top: 34%
                  left: 90%
                  '--mdc-icon-size': 32px
                card_mod:
                  style: |
                    :host {
                      --paper-item-icon-color: {% if is_state(config.entity, 'Chiuso') %}
                                               red
                                               {% else %}
                                               green
                                               {% endif %};
                      }
              - type: state-label
                entity: sensor.t_crock_odometer
                style:
                  top: 93%
                  left: 89%
                tap_action:
                  action: more-info
              - type: state-icon
                entity: sensor.t_crock_odometer
                style:
                  top: 92%
                  left: 76%
                tap_action:
                  action: more-info
              - type: state-icon
                entity: sensor.t_crock_oil_inspection_distance
                title: Ultimo Viaggio
                icon: mdi:oil
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Manutenzione
                      content:
                        type: custom:stack-in-card
                        cards:
                          - type: custom:layout-card
                            layout_type: masonry
                            layout: {}
                            cards:
                              - type: custom:mushroom-entity-card
                                entity: sensor.t_crock_oil_inspection_distance
                                tap_action:
                                  action: more-info
                                name: Prossimo Tagliando Km
                                icon: mdi:oil-level
                                icon_color: orange
                              - type: custom:mushroom-entity-card
                                entity: sensor.t_crock_service_inspection_days
                                name: Prossimo Tagliando Giorni
                                tap_action:
                                  action: more-info
                                icon: mdi:oil-temperature
                                icon_color: blue
                              - type: custom:mushroom-entity-card
                                entity: sensor.t_crock_odometer
                                tap_action:
                                  action: more-info
                                name: Km Totali
                                icon: mdi:speedometer-medium
                                icon_color: green
                style:
                  top: 34%
                  left: 21%
                  '--paper-item-icon-color': cyan
                  '--mdc-icon-size': 40px
              - type: state-icon
                entity: binary_sensor.t_crock_parking_light
                title: Posizione
                icon: mdi:car-parking-lights
                tap_action:
                  action: more-info
                style:
                  top: 50%
                  left: 11%
                card_mod:
                  style: |
                    :host {
                      --paper-item-icon-color: {% if is_state(config.entity, 'off') %}
                                               lightgrey
                                               {% else %}
                                               orange
                                               {% endif %};
          - type: horizontal-stack
            cards:
              - type: custom:bar-card
                show_icon: true
                align: split
                columns: 1
                max: 600
                positions:
                  icon: inside
                  indicator: inside
                  name: inside
                  value: inside
                unit_of_measurement: Km
                severity:
                  - color: red
                    from: 0
                    to: 100
                  - color: orange
                    from: 100
                    to: 400
                  - color: green
                    from: 400
                    to: 600
                style: |
                  ha-card { 
                    --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --paper-item-icon-color: 'var(--text-primary-color';
                    --ha-card-box-shadow: 'none';
                  }
                icon: mdi:fuel
                name: Autonomia
                entity_row: true
                entities:
                  - entity: sensor.t_crock_combustion_range
              - type: custom:bar-card
                show_icon: true
                align: split
                columns: 1
                max: 100
                positions:
                  icon: inside
                  indicator: inside
                  name: inside
                  value: inside
                severity:
                  - color: red
                    from: 0
                    to: 30
                  - color: orange
                    from: 30
                    to: 70
                  - color: green
                    from: 70
                    to: 100
                style: |
                  ha-card { 
                    --paper-card-background-color: 'rgba(0, 0, 0, 0.0)';
                    --ha-card-background: "rgba(0, 0, 0, 0.0)";
                    --paper-item-icon-color: 'var(--text-primary-color';
                    --ha-card-box-shadow: 'none';
                  }
                icon: mdi:fuel
                name: Livello Serbatoio
                entity_row: true
                entities:
                  - entity: sensor.t_crock_fuel_level
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Portiere
                secondary: |+
                  {{ states('sensor.portiere_troc') }}

                icon: |-
                  {% if is_state('lock.t_crock_door_locked', 'locked') %}
                      mdi:lock
                    {% else %}
                      mdi:lock-open
                    {% endif %}
                entity: lock.t_crock_door_locked
                icon_color: |-
                  {% if is_state('lock.t_crock_door_locked', 'locked') %}
                      red
                    {% else %}
                      green
                    {% endif %}
                tap_action:
                  action: more-info
                fill_container: false
                alignment: center
              - type: custom:mushroom-template-card
                primary: Bagagliaio
                secondary: |+
                  {{ states('sensor.bagagliaio_troc') }}

                icon: |-
                  {% if is_state('lock.t_crock_trunk_locked', 'locked') %}
                      mdi:lock
                    {% else %}
                      mdi:lock-open
                    {% endif %}
                entity: lock.t_crock_trunk_locked
                icon_color: |-
                  {% if is_state('lock.t_crock_trunk_locked', 'locked') %}
                      red
                    {% else %}
                      green
                    {% endif %}
                tap_action:
                  action: more-info
                fill_container: false
        columns: 1
      - square: false
        type: grid
        cards:
          - type: map
            entities:
              - entity: person.t_crock
            dark_mode: true
            hours_to_show: 24
            aspect_ratio: '4:3'
            card_mod:
              style:
                ha-map $ ha-entity-marker $: |
                  .marker {

                    /* Style person marker & adjust position to avoid blocking waypoints */
                    border: 3px solid var(--state-person) !important;
                    border-radius: 50% 50% 50% 0px !important;
                    transform: rotate(-45deg) translate(50%, -50%);
                    overflow: visible !important;
                    background: var(--state-person) !important;
                  }
                  .entity-picture {

                    /* Correct orientation of person avatar */
                    transform: rotate(45deg);
                    border-radius: 50%;
                  }
                ha-map $: |
                  path:first-child { 

                    /* Style accuracy radius */
                    stroke: var(--state-person);
                    fill: color-mix(in srgb, var(--state-person) 50%, transparent);
                    stroke-width: 0px;
                  }
                  path:nth-child(even) {

                    /* Styling for waypoints */
                    stroke: var(--purple-color);
                    stroke-width: 4px;
                  }
                  path:nth-child(odd):not(:first-child) { 

                    /* Styling for lines */
                    stroke: var(--purple-color);
                    stroke-width: 4px;
                  }

                  .leaflet-control-attribution {

                    /* Style attribution text */
                    background: rgba(var(--rgb-card-background-color), 0.4) !important;
                    font-size: 10px;
                  }
                  .leaflet-container a {

                    /* Set color of zoom icons & attribution text */
                    color: var(--secondary-text-color);
                  }

                  .leaflet-control-zoom-in,
                  .leaflet-control-zoom-out {

                    /* Style zoom buttons like Chips */
                    border-radius: var(--mush-chip-border-radius, 19px) !important;
                    padding: 3px;
                    background: rgb(var(--rgb-secondary-text-color), 0.2) !important;
                    margin: 8px 12px 0px;
                    border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                  } 
                  .leaflet-top {

                    /* Move zoom buttons to bottom of map */
                    bottom: 0px !important;
                  }
                  .leaflet-control-zoom {

                    /* Allow buttons to be moved */
                    position: absolute !important;

                    /* Adjust spacing for border */
                    bottom: calc(2 * var(--ha-card-border-width, 1px) + 56px);
                    
                    /* Remove extra margin */
                    margin: 0px !important;

                    /* Remove zoom control border */
                    border: none !important;
                  }
                  .leaflet-container:after {

                    /* Fade out map at top */
                    content: "";
                    position: absolute;
                    height: 100%;
                    width: 100%;
                    background: linear-gradient(to top, transparent 65%, var(--card-background-color));
                  }
                ha-icon-button $ mwc-icon-button $: |
                  button {

                    /* Size center button to match Chip */
                    height: var(--mush-chip-height, 36px) !important;
                    width: var(--mush-chip-height, 36px) !important;
                    --mdc-icon-size: 22px;
                  }
                .: |
                  ha-card {

                    /* Remove default card styling without affecting child elements */
                    box-shadow: none;
                    border-width: 0;
                    border-radius: 0px 0px var(--ha-card-border-radius, 12px) var(--ha-card-border-radius, 12px);
                    
                    transition: all 0s;
                  }
                  :host {

                    /* Define Person State colors. Can be added to theme */
                    --state-person-home: var(--green-color);
                    --state-person-not-home: var(--red-color);
                    --state-person-zone: var(--blue-color);
                    --state-person-unknown: var(--grey-color);

                    /* Set person state color */
                    --state-person:
                    {% if is_state(config.entities[0].entity, ['home', 'not_home', 'unknown']) %}
                      var(--state-person-{{ states(config.entities[0].entity) | replace('_', '-') }})
                    {% else %}
                      var(--state-person-zone)
                    {% endif %};
                  }
                  ha-icon-button {

                    /* Position center button */
                    bottom: 12px;
                    left: 12px !important;
                    top: auto !important;

                    /* Style center button to match Chip */
                    color: var(--deep-orange-color) !important;
                    background: color-mix(in srgb, var(--deep-orange-color) 20%, transparent);
                    border-radius: var(--mush-chip-border-radius, 19px);
                    border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
          - type: custom:uptime-card
            entity: sensor.posizione_troc
            title_template: Posizione
            icon: mdi:google-maps
            ko_icon: mdi:home
            ko: Casa
            icon_adaptive_color: true
            title_adaptive_color: true
            hours_to_show: 24
            color:
              ok: red
              ko: lightgreen
              half: red
            bar:
              spacing: 5
              height: 15
              round: 4
              amount: 24
            show:
              average: false
              status: true
              timeline: true
              title: true
            tooltip:
              hour24: true
            alignment:
              status: spaced
              header: right
              icon_first: true
            tap_action:
              action: more-info
        columns: 1
columns: 1
